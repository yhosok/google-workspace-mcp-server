# =================================================================
# Authentication Mode Selection
# =================================================================
# Choose between 'service-account' or 'oauth2' authentication
GOOGLE_AUTH_MODE=service-account

# =================================================================
# Service Account Authentication (Traditional)
# =================================================================
# Required when GOOGLE_AUTH_MODE=service-account
# Path to the Google Service Account key JSON file
GOOGLE_SERVICE_ACCOUNT_KEY_PATH=./path/to/service-account-key.json

# =================================================================
# OAuth2 User Authentication (Interactive)
# =================================================================
# Required when GOOGLE_AUTH_MODE=oauth2
# OAuth2 Client ID from Google Cloud Console
GOOGLE_OAUTH_CLIENT_ID=your-client-id.apps.googleusercontent.com

# OAuth2 Client Secret from Google Cloud Console
GOOGLE_OAUTH_CLIENT_SECRET=your-client-secret

# OAuth2 Redirect URI (must match Google Cloud Console configuration)
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:3000/oauth2callback

# OAuth2 Scopes (comma-separated list of required permissions)
# Note: drive.file scope is required for folder-based file creation and document management
# Note: drive.readonly scope is required for file export operations (e.g., Markdown export)
# Note: documents scope is required for Google Docs functionality
GOOGLE_OAUTH_SCOPES=https://www.googleapis.com/auth/spreadsheets,https://www.googleapis.com/auth/calendar,https://www.googleapis.com/auth/drive.file,https://www.googleapis.com/auth/drive.readonly,https://www.googleapis.com/auth/documents

# OAuth2 Local Server Port (optional, defaults to 3000)
GOOGLE_OAUTH_PORT=3000

# =================================================================
# Google Drive Configuration (Optional)
# =================================================================
# Optional folder placement for new documents and spreadsheets
# 
# When set: New documents and spreadsheets will be created in this specific folder
# When not set or empty: Files will be created in the default location (root)
# 
# Benefits:
# - Organize Google Workspace files (Docs, Sheets) in specific folders
# - Maintain folder structure for better file management
# - No impact on existing functionality when not configured
# 
# To find your folder ID:
# 1. Open the folder in Google Drive
# 2. Check the URL: https://drive.google.com/drive/folders/YOUR_FOLDER_ID
# 3. Copy the folder ID from the URL
GOOGLE_DRIVE_FOLDER_ID=your-folder-id

# =================================================================
# Access Control Configuration (SECURE BY DEFAULT)
# =================================================================
# Security-first design: This server defaults to read-only mode for enhanced security
# To enable write operations, explicitly set GOOGLE_READ_ONLY_MODE=false
# These settings provide fine-grained control over write operations

# Folder-based write restrictions
# When GOOGLE_DRIVE_FOLDER_ID is set, this controls write access outside that folder
# true = Allow writes anywhere (default)
# false = Restrict writes to GOOGLE_DRIVE_FOLDER_ID folder only
GOOGLE_ALLOW_WRITES_OUTSIDE_FOLDER=true

# Service-level write permissions (comma-separated)
# Only allow write operations for specified services
# Available services: sheets, docs, calendar, drive
# When not set: All services allowed (default)
# Example: GOOGLE_ALLOWED_WRITE_SERVICES=sheets,docs
GOOGLE_ALLOWED_WRITE_SERVICES=

# Tool-specific write permissions (comma-separated)
# Only allow specific write tools to execute
# This provides the most granular access control
# When not set: All tools allowed (default)
# Example: GOOGLE_ALLOWED_WRITE_TOOLS=google-workspace__sheets-write,google-workspace__sheets-append
GOOGLE_ALLOWED_WRITE_TOOLS=

# Global read-only mode (SECURE BY DEFAULT)
# IMPORTANT: Defaults to true for enhanced security
# When true, disables ALL write operations across all services
# When false, allows write operations (explicit opt-in required)
# true = Block all write operations (default for security)
# false = Allow writes (must be explicitly set to enable writes)
GOOGLE_READ_ONLY_MODE=true

# =================================================================
# Google API Retry Configuration (Optional)
# These settings control how the server handles transient API failures

# Maximum number of retry attempts for failed API calls (default: 3)
GOOGLE_RETRY_MAX_ATTEMPTS=3

# Base delay in milliseconds before first retry (default: 1000)
GOOGLE_RETRY_BASE_DELAY=1000

# Maximum delay in milliseconds between retries (default: 30000)
GOOGLE_RETRY_MAX_DELAY=30000

# Jitter factor (0-1) to add randomness to retry delays (default: 0.1)
# This helps prevent thundering herd problems when multiple clients retry simultaneously
GOOGLE_RETRY_JITTER=0.1

# Comma-separated list of HTTP status codes that should trigger retries (default: 429,500,502,503,504)
# 429 = Rate limit exceeded, 500 = Internal server error, 502 = Bad gateway, 503 = Service unavailable, 504 = Gateway timeout
GOOGLE_RETRY_RETRIABLE_CODES=429,500,502,503,504

# Timeout Configuration (Optional)
# These settings control timeout behavior for Google API operations

# Individual request timeout in milliseconds (default: 30000)
# This is the maximum time to wait for a single API request to complete
GOOGLE_REQUEST_TIMEOUT=30000

# Total retry operation timeout in milliseconds (default: 120000)
# This is the maximum total time for all retry attempts combined
GOOGLE_TOTAL_TIMEOUT=120000