# =================================================================
# Authentication Mode Selection
# =================================================================
# Choose between 'service-account' or 'oauth2' authentication
GOOGLE_AUTH_MODE=service-account

# =================================================================
# Service Account Authentication (Traditional)
# =================================================================
# Required when GOOGLE_AUTH_MODE=service-account
# Path to the Google Service Account key JSON file
GOOGLE_SERVICE_ACCOUNT_KEY_PATH=./path/to/service-account-key.json

# =================================================================
# OAuth2 User Authentication (Interactive)
# =================================================================
# Required when GOOGLE_AUTH_MODE=oauth2
#
# OAUTH2 CLIENT TYPE SELECTION:
# 
# PUBLIC CLIENT (Recommended for CLI/Desktop Applications):
# - Enhanced security with PKCE (Proof Key for Code Exchange)
# - No client secret storage required
# - Protects against authorization code interception
# - Simply OMIT the GOOGLE_OAUTH_CLIENT_SECRET variable below
#
# CONFIDENTIAL CLIENT (Traditional Server Applications):  
# - Requires secure client secret storage
# - Best for server environments with secure secret management
# - INCLUDE the GOOGLE_OAUTH_CLIENT_SECRET variable below
#
# OAuth2 Client ID from Google Cloud Console
GOOGLE_OAUTH_CLIENT_ID=your-client-id.apps.googleusercontent.com

# OAuth2 Client Secret from Google Cloud Console
# FOR PUBLIC CLIENT: Comment out or remove this line entirely for PKCE security
# FOR CONFIDENTIAL CLIENT: Uncomment and set your client secret
# GOOGLE_OAUTH_CLIENT_SECRET=your-client-secret

# OAuth2 Redirect URI (must match Google Cloud Console configuration)
# This URI must be registered in your Google Cloud Console OAuth2 client configuration
GOOGLE_OAUTH_REDIRECT_URI=http://localhost:3000/oauth2callback

# OAuth2 Scopes (comma-separated list of required permissions)
# These define what Google services your application can access
# Note: drive.file scope is required for folder-based spreadsheet creation
GOOGLE_OAUTH_SCOPES=https://www.googleapis.com/auth/spreadsheets,https://www.googleapis.com/auth/calendar,https://www.googleapis.com/auth/drive.file

# OAuth2 Local Server Port (optional, defaults to 3000)
# This is the port where the local callback server will listen during authentication
# Make sure this matches the port in your GOOGLE_OAUTH_REDIRECT_URI above
GOOGLE_OAUTH_PORT=3000

# =================================================================
# OAUTH2 SECURITY NOTES:
# =================================================================
# PKCE (Public Client Security):
# When client secret is omitted, the system automatically uses PKCE
# (Proof Key for Code Exchange) as defined in RFC 7636. This provides
# enhanced security by generating a cryptographically random code verifier
# and challenge, protecting against authorization code interception attacks.
# 
# Client Type Auto-Detection:
# The authentication system automatically detects your client type:
# - Public Client: When GOOGLE_OAUTH_CLIENT_SECRET is not set
# - Confidential Client: When GOOGLE_OAUTH_CLIENT_SECRET is provided
#
# Authentication Mode Selection:
# If GOOGLE_AUTH_MODE is not set, the system will auto-detect based on
# available credentials (service account file or OAuth2 client ID).
# =================================================================

# =================================================================
# Google Drive Configuration (Optional)
# =================================================================
# Optional folder placement for new spreadsheets
# 
# When set: New spreadsheets will be created in this specific folder
# When not set or empty: Spreadsheets will be created in the default location (root)
# 
# Benefits:
# - Organize spreadsheets in specific folders
# - Maintain folder structure for better file management
# - No impact on existing functionality when not configured
# 
# To find your folder ID:
# 1. Open the folder in Google Drive
# 2. Check the URL: https://drive.google.com/drive/folders/YOUR_FOLDER_ID
# 3. Copy the folder ID from the URL
GOOGLE_DRIVE_FOLDER_ID=your-folder-id

# Google API Retry Configuration (Optional)
# These settings control how the server handles transient API failures

# Maximum number of retry attempts for failed API calls (default: 3)
GOOGLE_RETRY_MAX_ATTEMPTS=3

# Base delay in milliseconds before first retry (default: 1000)
GOOGLE_RETRY_BASE_DELAY=1000

# Maximum delay in milliseconds between retries (default: 30000)
GOOGLE_RETRY_MAX_DELAY=30000

# Jitter factor (0-1) to add randomness to retry delays (default: 0.1)
# This helps prevent thundering herd problems when multiple clients retry simultaneously
GOOGLE_RETRY_JITTER=0.1

# Comma-separated list of HTTP status codes that should trigger retries (default: 429,500,502,503,504)
# 429 = Rate limit exceeded, 500 = Internal server error, 502 = Bad gateway, 503 = Service unavailable, 504 = Gateway timeout
GOOGLE_RETRY_RETRIABLE_CODES=429,500,502,503,504

# Timeout Configuration (Optional)
# These settings control timeout behavior for Google API operations

# Individual request timeout in milliseconds (default: 30000)
# This is the maximum time to wait for a single API request to complete
GOOGLE_REQUEST_TIMEOUT=30000

# Total retry operation timeout in milliseconds (default: 120000)
# This is the maximum total time for all retry attempts combined
GOOGLE_TOTAL_TIMEOUT=120000